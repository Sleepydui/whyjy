import{aA as lt,aB as le,aC as ce,aD as yt,aE as At,aF as fe,aG as Nt,aH as at,b as he,c as et,r as q,m as de,I as ut,o as me,g as ve,h as Z,K as nt,j as D,k as ge,l as Et,t as Q,F as jt,n as Ft,z as vt,u as pe,aI as ye,q as Me,E as be,G as we,H as G}from"./index-Bx8SvL3Q.js";function ke(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Bt(t){let e,i,n;t.length!==2?(e=lt,i=(s,l)=>lt(t(s),l),n=(s,l)=>t(s)-l):(e=t===lt||t===ke?t:_e,i=t,n=t);function a(s,l,o=0,d=s.length){if(o<d){if(e(l,l)!==0)return d;do{const c=o+d>>>1;i(s[c],l)<0?o=c+1:d=c}while(o<d)}return o}function u(s,l,o=0,d=s.length){if(o<d){if(e(l,l)!==0)return d;do{const c=o+d>>>1;i(s[c],l)<=0?o=c+1:d=c}while(o<d)}return o}function r(s,l,o=0,d=s.length){const c=a(s,l,o,d-1);return c>o&&n(s[c-1],l)>-n(s[c],l)?c-1:c}return{left:a,center:r,right:u}}function _e(){return 0}const Se=Bt(lt),xe=Se.right;Bt(le).center;const Ae=Math.sqrt(50),Ne=Math.sqrt(10),Ee=Math.sqrt(2);function ft(t,e,i){const n=(e-t)/Math.max(0,i),a=Math.floor(Math.log10(n)),u=n/Math.pow(10,a),r=u>=Ae?10:u>=Ne?5:u>=Ee?2:1;let s,l,o;return a<0?(o=Math.pow(10,-a)/r,s=Math.round(t*o),l=Math.round(e*o),s/o<t&&++s,l/o>e&&--l,o=-o):(o=Math.pow(10,a)*r,s=Math.round(t/o),l=Math.round(e/o),s*o<t&&++s,l*o>e&&--l),l<s&&.5<=i&&i<2?ft(t,e,i*2):[s,l,o]}function je(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];const n=e<t,[a,u,r]=n?ft(e,t,i):ft(t,e,i);if(!(u>=a))return[];const s=u-a+1,l=new Array(s);if(n)if(r<0)for(let o=0;o<s;++o)l[o]=(u-o)/-r;else for(let o=0;o<s;++o)l[o]=(u-o)*r;else if(r<0)for(let o=0;o<s;++o)l[o]=(a+o)/-r;else for(let o=0;o<s;++o)l[o]=(a+o)*r;return l}function Mt(t,e,i){return e=+e,t=+t,i=+i,ft(t,e,i)[2]}function Fe(t,e,i){e=+e,t=+t,i=+i;const n=e<t,a=n?Mt(e,t,i):Mt(t,e,i);return(n?-1:1)*(a<0?1/-a:a)}function De(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(u){for(a=0;a<i;++a)n[a]=t[a]*(1-u)+e[a]*u;return n}}function Oe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ce(t,e){var i=e?e.length:0,n=t?Math.min(i,t.length):0,a=new Array(n),u=new Array(i),r;for(r=0;r<n;++r)a[r]=_t(t[r],e[r]);for(;r<i;++r)u[r]=e[r];return function(s){for(r=0;r<n;++r)u[r]=a[r](s);return u}}function Pe(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function We(t,e){var i={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?i[a]=_t(t[a],e[a]):n[a]=e[a];return function(u){for(a in i)n[a]=i[a](u);return n}}function _t(t,e){var i=typeof e,n;return e==null||i==="boolean"?ce(e):(i==="number"?yt:i==="string"?(n=Nt(e))?(e=n,At):fe:e instanceof Nt?At:e instanceof Date?Pe:Oe(e)?De:Array.isArray(e)?Ce:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?We:yt)(t,e)}function Le(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}function ze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ht(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function it(t){return t=ht(Math.abs(t)),t?t[1]:NaN}function Ie(t,e){return function(i,n){for(var a=i.length,u=[],r=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),u.push(i.substring(a-=s,a+s)),!((l+=s+1)>n));)s=t[r=(r+1)%t.length];return u.reverse().join(e)}}function Te(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var Re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dt(t){if(!(e=Re.exec(t)))throw new Error("invalid format: "+t);var e;return new St({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}dt.prototype=St.prototype;function St(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}St.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $e(t){t:for(var e=t.length,i=1,n=-1,a;i<e;++i)switch(t[i]){case".":n=a=i;break;case"0":n===0&&(n=i),a=i;break;default:if(!+t[i])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Ht;function Ve(t,e){var i=ht(t,e);if(!i)return t+"";var n=i[0],a=i[1],u=a-(Ht=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,r=n.length;return u===r?n:u>r?n+new Array(u-r+1).join("0"):u>0?n.slice(0,u)+"."+n.slice(u):"0."+new Array(1-u).join("0")+ht(t,Math.max(0,e+u-1))[0]}function Dt(t,e){var i=ht(t,e);if(!i)return t+"";var n=i[0],a=i[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Ot={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ze,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Dt(t*100,e),r:Dt,s:Ve,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ct(t){return t}var Pt=Array.prototype.map,Wt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Be(t){var e=t.grouping===void 0||t.thousands===void 0?Ct:Ie(Pt.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?Ct:Te(Pt.call(t.numerals,String)),r=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function o(c){c=dt(c);var m=c.fill,v=c.align,M=c.sign,E=c.symbol,W=c.zero,z=c.width,T=c.comma,O=c.precision,R=c.trim,N=c.type;N==="n"?(T=!0,N="g"):Ot[N]||(O===void 0&&(O=12),R=!0,N="g"),(W||m==="0"&&v==="=")&&(W=!0,m="0",v="=");var U=E==="$"?i:E==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",Y=E==="$"?n:/[%p]/.test(N)?r:"",K=Ot[N],j=/[defgprs%]/.test(N);O=O===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function f(h){var p=U,y=Y,C,g,k;if(N==="c")y=K(h)+y,h="";else{h=+h;var _=h<0||1/h<0;if(h=isNaN(h)?l:K(Math.abs(h),O),R&&(h=$e(h)),_&&+h==0&&M!=="+"&&(_=!1),p=(_?M==="("?M:s:M==="-"||M==="("?"":M)+p,y=(N==="s"?Wt[8+Ht/3]:"")+y+(_&&M==="("?")":""),j){for(C=-1,g=h.length;++C<g;)if(k=h.charCodeAt(C),48>k||k>57){y=(k===46?a+h.slice(C+1):h.slice(C))+y,h=h.slice(0,C);break}}}T&&!W&&(h=e(h,1/0));var b=p.length+h.length+y.length,A=b<z?new Array(z-b+1).join(m):"";switch(T&&W&&(h=e(A+h,A.length?z-y.length:1/0),A=""),v){case"<":h=p+h+y+A;break;case"=":h=p+A+h+y;break;case"^":h=A.slice(0,b=A.length>>1)+p+h+y+A.slice(b);break;default:h=A+p+h+y;break}return u(h)}return f.toString=function(){return c+""},f}function d(c,m){var v=o((c=dt(c),c.type="f",c)),M=Math.max(-8,Math.min(8,Math.floor(it(m)/3)))*3,E=Math.pow(10,-M),W=Wt[8+M/3];return function(z){return v(E*z)+W}}return{format:o,formatPrefix:d}}var st,Ut,Kt;He({thousands:",",grouping:[3],currency:["$",""]});function He(t){return st=Be(t),Ut=st.format,Kt=st.formatPrefix,st}function Ue(t){return Math.max(0,-it(Math.abs(t)))}function Ke(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(it(e)/3)))*3-it(Math.abs(t)))}function qe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,it(e)-it(t))+1}function Ge(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Je(t){return function(){return t}}function Xe(t){return+t}var Lt=[0,1];function rt(t){return t}function bt(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Je(isNaN(e)?NaN:.5)}function Ye(t,e){var i;return t>e&&(i=t,t=e,e=i),function(n){return Math.max(t,Math.min(e,n))}}function Ze(t,e,i){var n=t[0],a=t[1],u=e[0],r=e[1];return a<n?(n=bt(a,n),u=i(r,u)):(n=bt(n,a),u=i(u,r)),function(s){return u(n(s))}}function Qe(t,e,i){var n=Math.min(t.length,e.length)-1,a=new Array(n),u=new Array(n),r=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++r<n;)a[r]=bt(t[r],t[r+1]),u[r]=i(e[r],e[r+1]);return function(s){var l=xe(t,s,1,n)-1;return u[l](a[l](s))}}function tn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function en(){var t=Lt,e=Lt,i=_t,n,a,u,r=rt,s,l,o;function d(){var m=Math.min(t.length,e.length);return r!==rt&&(r=Ye(t[0],t[m-1])),s=m>2?Qe:Ze,l=o=null,c}function c(m){return m==null||isNaN(m=+m)?u:(l||(l=s(t.map(n),e,i)))(n(r(m)))}return c.invert=function(m){return r(a((o||(o=s(e,t.map(n),yt)))(m)))},c.domain=function(m){return arguments.length?(t=Array.from(m,Xe),d()):t.slice()},c.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},c.rangeRound=function(m){return e=Array.from(m),i=Le,d()},c.clamp=function(m){return arguments.length?(r=m?!0:rt,d()):r!==rt},c.interpolate=function(m){return arguments.length?(i=m,d()):i},c.unknown=function(m){return arguments.length?(u=m,c):u},function(m,v){return n=m,a=v,d()}}function nn(){return en()(rt,rt)}function rn(t,e,i,n){var a=Fe(t,e,i),u;switch(n=dt(n??",f"),n.type){case"s":{var r=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(u=Ke(a,r))&&(n.precision=u),Kt(n,r)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(u=qe(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=u-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(u=Ue(a))&&(n.precision=u-(n.type==="%")*2);break}}return Ut(n)}function an(t){var e=t.domain;return t.ticks=function(i){var n=e();return je(n[0],n[n.length-1],i??10)},t.tickFormat=function(i,n){var a=e();return rn(a[0],a[a.length-1],i??10,n)},t.nice=function(i){i==null&&(i=10);var n=e(),a=0,u=n.length-1,r=n[a],s=n[u],l,o,d=10;for(s<r&&(o=r,r=s,s=o,o=a,a=u,u=o);d-- >0;){if(o=Mt(r,s,i),o===l)return n[a]=r,n[u]=s,e(n);if(o>0)r=Math.floor(r/o)*o,s=Math.ceil(s/o)*o;else if(o<0)r=Math.ceil(r*o)/o,s=Math.floor(s*o)/o;else break;l=o}return t},t}function qt(){var t=nn();return t.copy=function(){return tn(t,qt())},Ge.apply(t,arguments),an(t)}const on=(t,e)=>{const i=t.__vccOpts||t;for(const[n,a]of e)i[n]=a;return i};function Gt(t){return typeof t=="function"}function zt(){}var ct=function(t){this.previousValue=t,this.interrupted=!1,this.interruptHandlers=new Set};ct.prototype.throwIfInterrupted=function(){if(this.interrupted)throw new Error},ct.prototype.interrupt=function(){this.interrupted||(this.interrupted=!0,this.interruptHandlers.forEach(function(t){try{t()}catch{}}))},ct.prototype.onInterrupt=function(t){if(this.interrupted&&!this.interruptHandlers.has(t))try{t()}catch{}this.interruptHandlers.add(t)};function mt(t){return function(){return t}}function Jt(){return[]}var un={animationDuration:{type:Number,default:1e3},animationEasing:{type:String,default:"ease"},animationOverlap:{type:Number,default:1},color:{type:[String,Function],default:"Black"},createCanvas:{type:Function,default:function(){return document.createElement("canvas")}},createWorker:{type:Function,default:function(t){return new Worker(URL.createObjectURL(new Blob([t])))}},enterAnimation:{type:[Object,String],default:mt({opacity:0})},fontFamily:{type:[String,Function],default:"serif"},fontSizeRatio:{type:Number,default:0},fontStyle:{type:[String,Function],default:"normal"},fontVariant:{type:[String,Function],default:"normal"},fontWeight:{type:[String,Function],default:"normal"},leaveAnimation:{type:[Object,String],default:mt({opacity:0})},loadFont:{type:Function,default:function(t,e,i,n){return document.fonts.load([e,i,"1px",t].join(" "),n)}},rotation:{type:[Number,Function],default:0},rotationUnit:{type:[String,Function],default:"turn"},spacing:{type:Number,default:0},text:{type:[String,Function],default:""},weight:{type:[Number,Function],default:1},words:{type:Array,default:Jt}},sn=mt(null);function wt(t){if(t){var e=typeof t;return e==="object"||e==="function"}return!1}function kt(t){return typeof t=="string"}var ln={animationOptions:function(){var t,e,i,n=this.animationDuration,a=this.enterAnimation,u=this.leaveAnimation;if(wt(a)&&wt(u)){var r=(t=Object.assign({},a,u),e=sn,i={},Object.entries(t).forEach(function(o){var d=o[0],c=o[1];i[d]=e(c,d,t)}),i),s=function(o){Object.assign(o.style,a)},l=function(o,d){setTimeout(function(){Object.assign(o.style,r),setTimeout(d,n)},1)};return{props:{css:!1},on:{beforeAppear:s,appear:l,beforeEnter:s,enter:l,leave:function(o,d){Object.assign(o.style,u),setTimeout(d,n)}}}}return kt(a)&&kt(u)?{props:{duration:n,appear:!0,appearActiveClass:a,enterActiveClass:a,leaveActiveClass:u}}:{}},normalizedAnimationOverlap:function(){var t=this.animationOverlap;return(t=Math.abs(t))<1&&(t=1/t),t},separateAnimationDelay:function(){var t=this.cloudWords;return t.length>1?(this.animationDuration-this.separateAnimationDuration)/(t.length-1):0},separateAnimationDuration:function(){var t=this.cloudWords;if(t.length>0){var e=this.animationDuration,i=this.normalizedAnimationOverlap;return e/Math.min(i,t.length)}return 0}},cn=Array.isArray;function J(t){return Gt(t)?t:mt(t)}var Xt=2*Math.PI,fn=Xt/360;function X(t){return t===void 0}function tt(t,e){return t.postMessage(e),function(i){return new Promise(function(n,a){var u,r=function(l){var o=l.data;u(),n(o)},s=function(l){var o=l.error;u(),a(o)};u=function(){i.removeEventListener("message",r),i.removeEventListener("error",s)},i.addEventListener("message",r),i.addEventListener("error",s)})}(t)}function It(t,e,i){return Math.ceil(t*Math.abs(Math.sin(i))+e*Math.abs(Math.cos(i)))}function Tt(t,e,i){return Math.ceil(t*Math.abs(Math.cos(i))+e*Math.abs(Math.sin(i)))}function gt(t,e,i,n,a){return[t,e,i,n+"px",a].join(" ")}function Rt(t,e){return Math.ceil(t/e)*e}function $t(t,e,i){var n=i().getContext("2d");return n.font=e,n.measureText(t).width}var Yt=function(t,e,i,n,a,u,r){this.t=t,this.i=e,this.o=i,this.u=n,this.s=a,this.h=u,this.l=r,this.v=1,this.m=0,this.p=0,this.g=0},x={M:{configurable:!0},S:{configurable:!0},F:{configurable:!0},j:{configurable:!0},O:{configurable:!0},W:{configurable:!0},A:{configurable:!0},B:{configurable:!0},C:{configurable:!0},L:{configurable:!0},_:{configurable:!0},P:{configurable:!0},T:{configurable:!0},N:{configurable:!0},k:{configurable:!0},D:{configurable:!0},H:{configurable:!0},R:{configurable:!0},U:{configurable:!0}};x.M.get=function(){return this.v},x.M.set=function(t){this.v!==t&&(this.v=t,this.V=void 0)},x.S.get=function(){return gt(this.h,this.s,this.u,this.M,this.o)},x.F.get=function(){return this.q===void 0&&(this.q=$t(this.t,gt(this.h,this.s,this.u,1,this.o),this.l)),this.q},x.j.get=function(){return this.F*this.M},x.O.get=function(){return this.p*this.M},x.O.set=function(t){this.p=t/this.M},x.W.get=function(){return this.g*this.M},x.W.set=function(t){this.g=t/this.M},x.A.get=function(){return Tt(this.j,this.M,this.i)},x.B.get=function(){return It(this.j,this.M,this.i)},x.C.get=function(){return this.O-this.A/2},x.L.get=function(){return this.W-this.B/2},x._.get=function(){return this.m},x._.set=function(t){this.m!==t&&(this.m=t,this.V=void 0)},x.P.get=function(){return this.V===void 0&&(this.V=function(t,e,i,n,a,u,r,s,l){var o=gt(e,i,n,a*=4,u),d=r*a*2,c=d+$t(t,o,l),m=d+a,v=l(),M=v.getContext("2d"),E=Rt(Tt(c,m,s),4),W=Rt(It(c,m,s),4);v.width=E,v.height=W,M.translate(E/2,W/2),M.rotate(s),M.font=o,M.textAlign="center",M.textBaseline="middle",M.fillText(t,0,0),d>0&&(M.miterLimit=1,M.lineWidth=d,M.strokeText(t,0,0));for(var z=M.getImageData(0,0,E,W).data,T=[],O=1/0,R=0,N=1/0,U=0,Y=E/4,K=W/4,j=0;j<Y;++j)for(var f=0;f<K;++f)t:for(var h=0;h<4;++h)for(var p=0;p<4;++p)if(z[4*(E*(4*f+p)+(4*j+h))+3]){T.push([j,f]),O=Math.min(j,O),R=Math.max(j+1,R),N=Math.min(f,N),U=Math.max(f+1,U);break t}return T.length>0?[T.map(function(y){var C=y[0],g=y[1];return[C-O,g-N]}),R-O,U-N,Math.ceil(Y/2)-O,Math.ceil(K/2)-N]:[T,0,0,0,0]}(this.t,this.h,this.s,this.u,this.M,this.o,this._,this.i,this.l)),this.V},x.T.get=function(){return this.P[0]},x.N.get=function(){return this.P[1]},x.k.get=function(){return this.P[2]},x.D.get=function(){return this.P[3]},x.H.get=function(){return this.P[4]},x.R.get=function(){return Math.ceil(this.O)-this.D},x.R.set=function(t){this.O=t+this.D},x.U.get=function(){return Math.ceil(this.W)-this.H},x.U.set=function(t){this.W=t+this.H},Object.defineProperties(Yt.prototype,x);var hn={cloudWords:function(t){this.$emit("update:cloudWords",t)},progress:{handler:function(t){this.$emit("update:progress",t)},deep:!0,immediate:!0}},dn={updateElementSize:function(){var t=this.$el;t&&(this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight)}},zn={name:"VueWordCloud",mixins:[function(t){return{data:function(){var e={};return Object.keys(t).forEach(function(i){e["asyncComputed_trigger_"+i]={}}),e},computed:{},beforeCreate:function(){var e=this,i=new Set;Object.entries(t).forEach(function(n){var a=n[0],u=n[1],r=u.get,s=u.default,l=u.errorHandler;l===void 0&&(l=zt);var o,d=!0;e.$options.computed[a]=function(){return this["asyncComputed_trigger_"+a],this["asyncComputed_promise_"+a],s},e.$options.computed["asyncComputed_promise_"+a]=function(){var c=this;o&&(o.interrupt(),i.delete(o)),d&&(d=!1,Gt(s)&&(s=s.call(this)));var m=new ct(s);o=m,i.add(o),new Promise(function(v){v(r.call(c,m))}).then(function(v){m.throwIfInterrupted(),s=v,c["asyncComputed_trigger_"+a]={}}).catch(l)}})}}}({cloudWords:{get:function(t){var e,i=this,n=this,a=n.elementWidth,u=n.elementHeight,r=n.words,s=n.text,l=n.weight,o=n.rotation,d=n.rotationUnit,c=n.fontFamily,m=n.fontWeight,v=n.fontVariant,M=n.fontStyle,E=n.color,W=n.spacing,z=n.fontSizeRatio,T=n.createCanvas,O=n.loadFont,R=n.createWorker;e=z,z=(e=Math.abs(e))>1?1/e:e;var N=function(g){var k=g[0],_=g[1];return k>_?[1,_/k]:_>k?[k/_,1]:[1,1]}([a,u]);if(a>0&&u>0){var U=J(s),Y=J(l),K=J(o),j=J(d),f=J(c),h=J(m),p=J(v),y=J(M),C=J(E);return r=r.map(function(g,k){var _,b,A,L,$,w,S,F,V,I,H;g&&(kt(g)?A=g:cn(g)?(A=(_=g)[0],L=_[1]):wt(g)&&(A=(b=g).text,L=b.weight,$=b.rotation,w=b.rotationUnit,S=b.fontFamily,F=b.fontWeight,V=b.fontVariant,I=b.fontStyle,H=b.color)),X(A)&&(A=U(g,k,r)),X(L)&&(L=Y(g,k,r)),X($)&&($=K(g,k,r)),X(w)&&(w=j(g,k,r)),X(S)&&(S=f(g,k,r)),X(F)&&(F=h(g,k,r)),X(V)&&(V=p(g,k,r)),X(I)&&(I=y(g,k,r)),X(H)&&(H=C(g,k,r));var B=new Yt(A,function(){switch(w){case"turn":return $*Xt;case"deg":return function(P){return P*fn}($)}return $}(),S,F,V,I,T);return Object.assign(B,{J:g,G:L,I:H}),B}),Promise.resolve().then(function(){return Promise.all(r.map(function(g){var k=g.o,_=g.h,b=g.u,A=g.t;return O(k,_,b,A)}))}).catch(zt).then(function(){if((r=r.filter(function(w){return w.j>0}).sort(function(w,S){return S.G-w.G})).length>0){var g=r[0],k=function(w){return w[S=w,S.length-1];var S}(r),_=g.G,b=k.G;if(b<_){var A=z>0?1/z:b>0?_/b:_<0?b/_:1+_-b;r.forEach(function(w){var S,F,V;w.M=(S=w.G,(V=1)+(S-(F=b))*(A-V)/(_-F))})}r.reduceRight(function(w,S){return S.M<2*w?S.M/=w:(w=S.M,S.M=1),S.K=w},1),r.forEach(function(w){w.M*=4});var L=R(`!function(){"use strict";var r=function(t){self.removeEventListener("message",r);var n,e,a,f,i,u=t.data,o=function(){n={},e=0,a=0,f=0,i=0};o();var s=function(){return Math.ceil((e+a)/2)},v=function(){return Math.ceil((f+i)/2)},c=function(){return{left:s(),top:v(),width:a-e,height:i-f}},l=function(r,t,u){r.forEach((function(r){var o=r[0],s=r[1],v=t+o,c=u+s;n[v+"|"+c]=!0,e=Math.min(v,e),a=Math.max(v+1,a),f=Math.min(c,f),i=Math.max(c+1,i)}))},h=function(r,t,e){return function(r,t,n){var e,a,f=r[0],i=r[1],u=t[0],o=t[1];f>i?(e=1,a=i/f):i>f?(a=1,e=f/i):e=a=1;var s=[u,o];if(n(s))return s;for(var v=u,c=o,l=u,h=o,M=v,d=c;;){u-=e,o-=a,v+=e,c+=a;var m=Math.floor(u),g=Math.floor(o),p=Math.ceil(v),E=Math.ceil(c);if(p>M)for(var L=g;L<E;++L){var x=[p,L];if(n(x))return x}if(E>d)for(var y=p;y>m;--y){var w=[y,E];if(n(w))return w}if(m<l)for(var B=E;B>g;--B){var F=[m,B];if(n(F))return F}if(g<h)for(var b=m;b<p;++b){var j=[b,g];if(n(j))return j}l=m,h=g,M=p,d=E}}(u,[t+s(),e+v()],(function(t){var e=t[0],a=t[1];return function(r,t,e){return r.every((function(r){var a=r[0],f=r[1];return!n[t+a+"|"+(e+f)]}))}(r,e,a)}))};self.postMessage({}),self.addEventListener("message",(function(r){self.postMessage({getBounds:c,put:l,findFit:h,clear:o}[r.data.name].apply(null,r.data.args))}))};self.addEventListener("message",r)}();
`),$={completedWords:0,totalWords:r.length};return Promise.resolve().then(function(){return t.throwIfInterrupted(),i.progress=$,tt(L,N)}).then(function(){t.throwIfInterrupted(),$.completedWords++;var w=Promise.resolve();return r.reduce(function(S,F,V){return w=w.then(function(){return F.K<S.K?Promise.resolve().then(function(){return tt(L,{name:"clear"})}).then(function(){var I=Promise.resolve(),H=S.K/F.K;return r.slice(0,V).forEach(function(B){I=I.then(function(){return B.M*=H,tt(L,{name:"put",args:[B.T,B.R,B.U]})})}),I}):tt(L,{name:"put",args:[S.T,S.R,S.U]})}).then(function(){return F._=W,tt(L,{name:"findFit",args:[F.T,F.R,F.U]})}).then(function(I){var H=I[0],B=I[1];t.throwIfInterrupted(),$.completedWords++,F.R=H,F.U=B,F._=0}),F}),w}).then(function(){return tt(L,{name:"put",args:[k.T,k.R,k.U]})}).then(function(){return tt(L,{name:"getBounds"})}).then(function(w){var S=w.left,F=w.top,V=w.width,I=w.height;if(V>0&&I>0){var H=Math.min(a/V,u/I);r.forEach(function(P){P.O-=S,P.W-=F,P.M*=H})}var B=new Set;return r.map(function(P){for(var Zt=P.J,xt=P.t,Qt=P.G,te=P.i,ee=P.o,ne=P.u,re=P.s,ie=P.h,ae=P.S,oe=P.O,ue=P.W,se=P.I,ot=JSON.stringify([xt,ee,ne,re,ie]);B.has(ot);)ot+="!";return B.add(ot),{key:ot,word:Zt,text:xt,weight:Qt,rotation:te,font:ae,color:se,left:oe,top:ue}})}).finally(function(){L.terminate()}).finally(function(){t.throwIfInterrupted(),i.progress=null})}return[]})}return[]},default:Jt}})],props:un,data:function(){return{elementWidth:0,elementHeight:0,progress:null}},computed:ln,watch:hn,mounted:function(){var t,e,i=this;t=function(){if(i._isDestroyed)return!1;i.updateElementSize()},e=1e3,function(n){var a=function(){for(var u=[],r=arguments.length;r--;)u[r]=arguments[r];return n.call.apply(n,[this,a].concat(u))};return a}(function(n){requestAnimationFrame(function(){t()!==!1&&setTimeout(n,e)})})()},methods:dn,render:function(){var t=this.$slots,e=this.animationEasing,i=this.animationOptions,n=this.cloudWords,a=this.separateAnimationDelay,u=this.separateAnimationDuration;return t=Object.assign({},{default:function(r){return r.text}},t),at("div",{style:{height:"100%",position:"relative",width:"100%"}},[at("div",{style:{bottom:"50%",position:"absolute",right:"50%",transform:"translate(50%,50%)"}},n.map(function(r,s){var l=r.color,o=r.font,d=r.left,c=r.rotation,m=r.text,v=r.top,M=r.weight,E=r.word;return at("transition",Object.assign({},i),[at("div",{key:s,style:Object.assign({},{left:d+"px",position:"absolute",top:v+"px"},u>0?{animation:[u+"ms",e,a*s+"ms"].join(" "),transition:["all",u+"ms",e,a*s+"ms"].join(" ")}:{})},[at("div",{style:Object.assign({},{bottom:"50%",color:l,font:o,position:"absolute",right:"50%",transform:["translate(50%,50%)","rotate("+c+"rad)"].join(" "),whiteSpace:"nowrap"},u>0?{transition:["all",u+"ms",e,a*s+"ms"].join(" ")}:{})},[t.default({color:l,font:o,left:d,text:m,top:v,weight:M,word:E})])])])}))])}};function mn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pt,Vt;function vn(){if(Vt)return pt;Vt=1;function t(i,n){var a=0,u;for(u=0;u<i.length;u++){var r=i[u]-n[u];a+=r*r}return Math.sqrt(a)}class e{constructor(){this.kernelFunc=function(n,a){return Math.exp(-1/2*(n*n)/(a*a))},this.iterationCallback=null}cluster(n,a,u){var r=n.slice();this.iterationCallback=u;var s=1,l=0,o=new Array(r.length);for(o.fill(!0);s>e.options.minDistance;){s=0,l+=1;for(var d=0;d<r.length;++d)if(o[d]){var c=r[d],m=c;c=this._shiftPoint(c,n,a);var v=t(c,m);v>s&&(s=v),v<e.options.minDistance&&(o[d]=!1),r[d]=c}this.iterationCallback&&this.iterationCallback(r,l)}return{originalPoints:n,shiftedPoints:r,clusterIndices:this._groupPoints(r)}}setKernetFunc(n){this.kernelFunc=n}_shiftPoint(n,a,u){var r=n.slice();r.fill(0);var s=0,l;for(l=0;l<a.length;l++){var o=a[l],d=t(n,o),c=this.kernelFunc(d,u),m;for(m=0;m<r.length;m++)r[m]+=o[m]*c;s+=c}for(l=0;l<r.length;l++)r[l]/=s;return r}_groupPoints(n){var a=[],u=0,r=[],s;for(s=0;s<n.length;++s){var l=n[s],o=this._findNearestGroup(l,r);o==null?(a[s]=u,r[u]=[l],u++):(a[s]=o,r[o].push(l))}return a}_findNearestGroup(n,a){var u,r=null;for(u=0;u<a.length;++u){var s=this._distanceToGroup(n,a[u]);if(s<e.options.groupDistanceTolerance){r=u;break}}return r}_distanceToGroup(n,a){var u=Number.MAX_VALUE,r;for(r=0;r<a.length;++r){var s=t(n,a[r]);s<u&&(u=s)}return u}}return e.options={minDistance:.001,groupDistanceTolerance:.1},pt=e,pt}var gn=vn();const In=mn(gn),pn=t=>(be("data-v-69726632"),t=t(),we(),t),yn={class:"chart-header"},Mn={key:0,class:"title-wrapper"},bn=["title"],wn={key:0,class:"toggle-buttons"},kn=["onClick"],_n={class:"subheader-wrapper"},Sn=["title"],xn=["title"],An={class:"text-wrapper",style:{"margin-left":"0.5625rem"}},Nn={class:"sub-title-unit"},En=pn(()=>D("div",{class:"divider"},[D("div",{class:"fixed-line line"}),D("div",{class:"fill-line line"})],-1)),jn=["onClick","onMouseover"],Fn=["title"],Dn=["val"],On={class:"item-value"},Cn={class:"chart-axis"},Pn={class:"tick-label"},Wn=he({__name:"KeywordView",props:{height:{},width:{},barData:{},toggleLabels:{default:()=>[]},title:{default:"关键词列表"},lableName:{default:"关键词"},valueName:{default:"出现频次"},unit:{default:"（单位：次）"},hoverKeyword:{}},emits:["update:hoverKeyword"],setup(t,{emit:e}){const i=t,n=et(()=>{const f=Math.min(2,i.barData[0].values.length);return i.toggleLabels.length>2?i.toggleLabels.slice(0,f):i.toggleLabels}),a=e,u=f=>{a("update:hoverKeyword",f)},r=q(parseFloat(getComputedStyle(document.documentElement).fontSize)),s=()=>{r.value=parseFloat(getComputedStyle(document.documentElement).fontSize)},l=q(Date.now()),o=q(null),d=q(0),c=q(0),m=q(-1),v=q(0),M=q([]),E=q(i.barData.map((f,h)=>({id:h,label:f.label,values:f.values,top:!1})).sort((f,h)=>(f.values[v.value]-h.values[v.value])*m.value)),W=et(()=>M.value.concat(E.value.filter(f=>!f.top))),z=et(()=>de(i.barData,f=>f.values[v.value])),T=et(()=>Math.min(Math.floor(c.value/(r.value*4)),10)),O=et(()=>N(0,z.value,T.value)),R=et(()=>qt().domain([0,O.value[O.value.length-1]]).range([0,c.value-6.5*r.value]));function N(f,h,p){const y=(h-f)/Math.max(p,1),C=Math.floor(Math.log10(y)),g=y/Math.pow(10,C),k=g>=Math.sqrt(50)?10:g>=Math.sqrt(10)?5:g>=Math.sqrt(2)?2:1;if(C<0)return Array.from({length:p},(_,b)=>f+b);{const _=Math.pow(10,C)*k;let b=Math.round(f/_),A=Math.round(h/_);return b*_>f&&b--,A*_<h&&A++,Array.from({length:A-b+1},(L,$)=>(b+$)*_)}}function U(f){f.top?(f.top=!1,M.value=M.value.filter(h=>h.id!==f.id)):(f.top=!0,M.value.unshift(f))}function Y(f){v.value=f}function K(){m.value===1?m.value=-1:m.value=1}ut(()=>[r],()=>{l.value=Date.now()}),ut(()=>o.value,()=>{if(j&&(j.disconnect(),j=null),o.value){const f=o.value.$el;j=new ResizeObserver(h=>{for(const p of h){const{height:y,width:C}=p.contentRect;d.value=y,c.value=C}}),j.observe(f)}}),ut(()=>[v.value,m.value],()=>{E.value=E.value.sort((f,h)=>(f.values[v.value]-h.values[v.value])*m.value)}),ut(()=>i.barData,()=>{E.value=i.barData.map((f,h)=>({id:h,label:f.label,values:f.values,top:!1})).sort((f,h)=>(f.values[v.value]-h.values[v.value])*m.value)});let j=null;return me(()=>{var h;const f=(h=o.value)==null?void 0:h.$el;f&&(j=new ResizeObserver(p=>{for(const y of p){const{height:C,width:g}=y.contentRect;d.value=C,c.value=g}}),j.observe(f),window.addEventListener("resize",s))}),ve(()=>{j&&j.disconnect(),window.removeEventListener("resize",s)}),(f,h)=>(G(),Z("div",{style:nt({height:typeof f.height=="number"?`${f.height}px`:f.height,width:typeof f.width=="number"?`${f.width}px`:f.width}),class:"keyword-container"},[D("header",yn,[f.title.length>0?(G(),Z("div",Mn,[D("div",{class:"chart-title",title:f.title},Q(f.title),9,bn),n.value.length>1?(G(),Z("div",wn,[(G(!0),Z(jt,null,Ft(n.value,(p,y)=>(G(),Z("button",{key:y,class:vt(["toggle-btn",{active:v.value===y}]),onClick:C=>Y(y)},Q(p),11,kn))),128))])):Et("",!0)])):Et("",!0),D("div",_n,[D("div",{class:"fixed-sub-title sub-title",title:f.lableName},Q(f.lableName),9,Sn),D("div",{class:"fill-sub-title sub-title",title:f.valueName},[D("div",An,[D("div",null,Q(f.valueName),1),D("div",Nn,Q(f.unit),1)])],8,xn),D("div",{class:"sort-buttons",onClick:K},[D("div",{class:vt(["sort-arrow",{active:m.value===1}])},"▲",2),D("div",{class:vt(["sort-arrow",{active:m.value===-1}])},"▼",2)])]),En]),(G(),ge(pe(ye),{items:W.value,"item-size":2.1875*r.value,"key-field":"id",class:"chart-body",key:l.value,style:nt({height:d.value+"px"}),ref_key:"scroller",ref:o},{default:Me(({item:p})=>[(G(),Z("div",{class:"bar-item",onClick:y=>U(p),key:p.id,style:nt({backgroundColor:p.top?"#e5e5e5":""}),onMouseover:y=>u(p.label),onMouseleave:h[0]||(h[0]=y=>u(null))},[D("div",{class:"item-name",title:p.label},Q(p.label),9,Fn),D("div",{class:"item-inner",style:nt({width:R.value(p.values[v.value])+"px","--xoffset":-(c.value-(5.5+2*.3125)*r.value-R.value(p.values[v.value]))+"px"}),val:p.values[v.value]},null,12,Dn),D("div",On,Q(p.values[v.value]),1)],44,jn))]),_:1},8,["items","item-size","style"])),D("div",Cn,[(G(!0),Z(jt,null,Ft(O.value,(p,y)=>(G(),Z("div",{key:y,class:"axis-tick",style:nt({left:R.value(p)+"px"})},[D("div",{class:"tick-line",style:nt({height:d.value+"px"})},null,4),D("div",Pn,Q(p),1)],4))),128))])],4))}}),Tn=on(Wn,[["__scopeId","data-v-69726632"]]);export{Tn as K,In as M,zn as O,on as _,je as a,Bt as b,Fe as c,Ge as d,nn as e,tn as f,_t as i,qt as l,Mt as t};
